<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>日高地区 高齢者向け施設マップ</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <style>
    body { font-family: sans-serif; background: #fff9e6; margin: 0; padding: 0; font-size: 18px; }
    h2 { text-align: center; font-size: 26px; margin: 10px 0; color: #5a3825; }
    #map { height: 70vh; width: 100%; display: block; margin-top: 10px; }
    .input-group { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 10px; }
    #filterSelect, #searchInput, #searchBtn { font-size: 18px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; }
    #searchBtn { background-color: #8b5e3c; color: white; cursor: pointer; }
    #shareBtn, #formBtn {
      position: fixed; bottom: 20px; z-index: 1000; padding: 10px 18px; font-size: 18px;
      border-radius: 10px; border: none; color: white;
    }
    #shareBtn { right: 20px; background: #f4a261; }
    #formBtn { left: 20px; background: #2a9d8f; }
    #shareBtn:hover, #formBtn:hover, #searchBtn:hover { opacity: 0.8; }

    .mode-filters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin: 10px 0;
    }
    .mode-option {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 18px;
    }

    @media (max-width: 600px) {
      .mode-filters {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <h2>日高地区 高齢者向け施設マップ</h2>

  <div class="mode-filters">
    <label class="mode-option">
      <input type="checkbox" id="mode-car" checked>
      自動車
    </label>
    <label class="mode-option">
      <input type="checkbox" id="mode-walk" checked>
      歩行
    </label>
    <label class="mode-option">
      <input type="checkbox" id="mode-bike" checked>
      自転車
    </label>
  </div>

  <div class="input-group">
    <select id="filterSelect"><option value="すべて">すべてのジャンル</option></select>
    <input type="text" id="searchInput" placeholder="施設名で検索...">
    <button id="searchBtn">検索</button>
  </div>

  <div id="map"></div>
  <button id="shareBtn">人に教える</button>
  <button id="formBtn" onclick="window.open('https://docs.google.com/forms/...', '_blank')">情報を投稿する</button>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const map = L.map('map', { zoomControl: false }).setView([35.467222, 134.771509], 14);
      L.control.zoom({ position: 'bottomright' }).addTo(map);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
      }).addTo(map);

      // チェック状態の取得用（今は仮、後で活用）
      const modeCar = document.getElementById('mode-car');
      const modeWalk = document.getElementById('mode-walk');
      const modeBike = document.getElementById('mode-bike');

      // あとはマーカーのジャンルに応じた表示制御をここに追加できる（今はUIだけ修正）

    });
  </script>
</body>
</html>
